<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Oz Ring Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style>
        body{
            background-repeat: no-repeat;
        }
        
        
        
        
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</head>
<body class="bg-dark bg-gradient">
    <div class="text-center text-light" id="top">
        <h1 class="h1">OZ RING CALCULATOR</h1>
        <h2 >Tool to calculate final damage increase when using Oz ring</h2>
    </div>
    <form class="container mt-4 border border-4 rounded shadow-lg bg-light" onsubmit="return false">
        <div class="mt-3 text-center">
            <div class="fs-5 fw-semibold mb-3 ">
                STEP 1 : CHOOSE YOUR RING
            </div>
            <div>Ring:
                <select id="ringname">
                    <option>Ring of Restraint</option>
                    <option>Weapon Jump</option>
                    <option>Critical Damage</option>
                    <option>Totalling Ring</option>
                    <option>Level Jump</option>
                </select>
            
            Level:
                <select id="ringlevel">
                    <option>4</option>
                    <option>3</option>
                    <option>2</option>
                    <option>1</option>
                </select>
            </div>
        </div>
        <div class="mt-4 mb-3">
            <div class="fs-5 fw-semibold mb-3 text-center">
                STEP 2 : ENTER REQUIRED STAT
            </div>
            <div class="row">
                <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
                    <label class="form-label">Total ATT%/M.ATT%</label>
                    <input class="form-control" type="number" id="att" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                    data-bs-title="Total main %ATT among all your Equip, Magnificent Soul, Familiar Lines and Familiar Badge">
                </div>
                <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
                    <label class="form-label">ATT/M.ATT on Main Weapon</label>
                    <input class="form-control" type="number" id="attwep" disabled="" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                    data-bs-title="Your main ATT on your main weapon">
                    
                </div>
                <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
                    <label class="form-label">Total Primary Stat %</label>
                    <input class="form-control" type="number" id="primaryps" disabled="" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                    data-bs-title="Total your main stat % among all your Equip and Familiar including All Stat %">
                    
                </div>
                <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
                    <label class="form-label">Total Primary Stat</label>
                    <input class="form-control" type="number" id="primary" disabled="" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                    data-bs-title="Your main stat display on stat window when Oz ring is equiped">
            
                </div>
                <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
                    <label class="form-label">Total Secondary Stat</label>
                    <input class="form-control" type="number" id="secondary" disabled="" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                    data-bs-title="Your secondary stat display on stat window when Oz ring is equiped">
                    
                </div>
                <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
                    <label class="form-label">Character Level</label>
                    <input class="form-control" type="number" id="level" disabled="">
                    
                </div>
                <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
                    <label class="form-label">Critical Damage %</label>
                    <input class="form-control" type="number" id="critdmg" disabled="" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                    data-bs-title="Your Critical Damage % display on stat window" >
                    
                </div>
                <div class="col-md-6 col-lg-4 col-xl-3 mb-3">
                    <label class="form-label">Total Stat</label>
                    <input class="form-control" type="number" id="totalstat" disabled="" data-bs-toggle="tooltip" data-bs-placement="bottom" 
                    data-bs-title="Total STR + DEX + LUK + INT display on stat window when Oz ring is equiped">
                    
                </div>
            </div>
        </div>
    
    
    
        <div class="container text-center mt-3 mb-4">
            <button id="calculate" class="btn btn-primary btn-lg">CALCULATE</button>
        </div>
    </form>

    
    
    
    <div class="container mt-4 border border-4 rounded shadow-lg text-center bg-light">
        <p id="result" class="mt-4 mb-4">NOTE: If you are Shadowers, Dual Blades or Cadena, your secondary stat is both LUK and STR<br>
             
            
        </p>
    </div>
    


    <script>
        
        
        //disable unused input
        document.querySelector('#ringname').onchange = () =>
        {
            let ringname = document.querySelector('#ringname').value;
            if (ringname === 'Ring of Restraint')
            {   
                document.querySelector('#att').disabled = false;
                document.querySelector('#attwep').disabled = true;
                document.querySelector('#primaryps').disabled = true;
                document.querySelector('#primary').disabled = true;
                document.querySelector('#secondary').disabled = true;
                document.querySelector('#level').disabled = true;
                document.querySelector('#critdmg').disabled = true;
                document.querySelector('#totalstat').disabled = true;
                
            }
            else if (ringname === 'Weapon Jump')
            {
                document.querySelector('#att').disabled = true;
                document.querySelector('#attwep').disabled = false;
                document.querySelector('#primaryps').disabled = false;
                document.querySelector('#primary').disabled = false;
                document.querySelector('#secondary').disabled = false;
                document.querySelector('#level').disabled = true;
                document.querySelector('#critdmg').disabled = true;
                document.querySelector('#totalstat').disabled = true;
            }
            else if (ringname === 'Level Jump')
            {
                document.querySelector('#att').disabled = true;
                document.querySelector('#attwep').disabled = true;
                document.querySelector('#primaryps').disabled = false;
                document.querySelector('#primary').disabled = false;
                document.querySelector('#secondary').disabled = false;
                document.querySelector('#level').disabled = false;
                document.querySelector('#critdmg').disabled = true;
                document.querySelector('#totalstat').disabled = true;
            }
            else if (ringname === 'Critical Damage')
            {
                document.querySelector('#att').disabled = true;
                document.querySelector('#attwep').disabled = true;
                document.querySelector('#primaryps').disabled = true;
                document.querySelector('#primary').disabled = true;
                document.querySelector('#secondary').disabled = true;
                document.querySelector('#level').disabled = true;
                document.querySelector('#critdmg').disabled = false;
                document.querySelector('#totalstat').disabled = true;
            }
            else if (ringname === 'Totalling Ring')
            {
                document.querySelector('#att').disabled = true;
                document.querySelector('#attwep').disabled = true;
                document.querySelector('#primaryps').disabled = false;
                document.querySelector('#primary').disabled = false;
                document.querySelector('#secondary').disabled = false;
                document.querySelector('#level').disabled = true;
                document.querySelector('#critdmg').disabled = true;
                document.querySelector('#totalstat').disabled = false;
            }
            
        }

        
       
        
       // Calculate the damage increase and print out 
        document.querySelector('#calculate').onclick = () => {

            let ringname = document.querySelector('#ringname').value;

            let ringlevel = parseInt(document.querySelector('#ringlevel').value);
        
            let att = parseInt(document.querySelector('#att').value);

            let attwep = parseInt(document.querySelector('#attwep').value);

            let primaryps = parseInt(document.querySelector('#primaryps').value);

            let primary = parseInt(document.querySelector('#primary').value);

            let secondary = parseInt(document.querySelector('#secondary').value);

            let level = parseInt(document.querySelector('#level').value);

            let critdmg = parseInt(document.querySelector('#critdmg').value);
            
            let totalstat = parseInt(document.querySelector('#totalstat').value);
        
            if (ringname === 'Ring of Restraint')
            {    
                result = (ringlevel * 25) / (att+100) *100;

            }
        
            else if (ringname === 'Weapon Jump')
            {
                result = (attwep * ringlevel * (primaryps + 100) * 4)/((primary * 4) + secondary);

            }

            else if (ringname === 'Level Jump')
            {
                result = (level * (20 + 70 *ringlevel)/100 * (primaryps + 100) *4)/ ((primary * 4) + secondary);
            }

            else if (ringname === 'Critical Damage')
            {
                result = (ringlevel * 7) / (100 + critdmg) * 100;
            }
            
            else if (ringname === 'Totalling Ring')
            {
                if (ringlevel == '1' || ringlevel == '2')
                {
                    result = (totalstat /100 * (primaryps +100) *4)/((primary * 4) + secondary);
                }
                else if (ringlevel == '3' || ringlevel == '4')
                {
                    result = (totalstat /100 *2 * (primaryps +100) *4 )/((primary * 4) + secondary);
                }
            }
            result = parseFloat(result).toFixed(2);
            document.querySelector('#result').innerHTML = `${ringname} ${ringlevel} give you ${result}% final damage`;
        }

        //enable tooltip
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))

            
    </script>

</body>
</html>